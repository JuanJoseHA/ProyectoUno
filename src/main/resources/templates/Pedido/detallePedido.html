<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
  <meta charset="UTF-8">
  <title>Detalle de Pedido</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

<div th:replace="fragmentos/header :: siteHeader('none','none')"></div>

<div class="container mt-5">
    <h1 class="text-center mb-4">Detalle del Pedido</h1>

    <div class="row mb-3 text-center">
      <div class="col-md-4"><strong>ID Pedido:</strong> <span th:text="${pedido.idpedido}">1</span></div>
      <div class="col-md-4"><strong>ID Cliente:</strong> <span th:text="${pedido.idcliente.nombre} + ' ' + ${pedido.idcliente.apellidos} ">1</span></div>
      
      
      <div class="col-md-4"><strong>Atendido por:</strong> 
          <span th:text="${pedido.nombreDeQuienAtiende}">Sin asignar</span>
      </div>
      
      <div class="col-md-4"><strong>Fecha y hora del pedido:</strong> <span th:text="${#temporals.format(pedido.fecha,'yyyy-MM-dd HH:mm')}">2025-10-09 12:00</span></div>
      <div class="col-md-4"><strong>Total:</strong> $ <span th:text="${#numbers.formatDecimal(pedido.total,1,'POINT',2,'POINT')}">0.00</span></div>
    </div>
    
    <div class="alert alert-info mt-3" th:if="${pedido.reserva != null}">
        <p class="mb-0">
            Reserva Asociada: #<span th:text="${pedido.reserva.idservicio}">1</span> en la Mesa 
            <span th:text="${pedido.reserva.mesa.idmesa}">Mesa 5</span> para el dia 
            <span th:text="${#temporals.format(pedido.reserva.fecha,'dd/MM/yyyy')}">25/10/2025</span> a las 
            <span th:text="${pedido.reserva.hora}">18:00</span>.
        </p>
    </div>

  <div class="table-responsive">
    <table class="table table-bordered table-striped text-center align-middle">
      <thead class="table-dark">
        <tr>
          <th>ID Producto</th>
          <th>Producto</th>
          <th>Precio</th>
          <th>Cantidad</th>
          <th>Importe</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="r : ${filas}">
          <td th:text="${r.idprod}">1</td>
          <td th:text="${r.nombreprod}">Taco al pastor</td>
          <td>$ <span th:text="${#numbers.formatDecimal(r.precio,1,'POINT',2,'POINT')}">0.00</span></td>
          <td th:text="${r.cantidad}">2</td>
          <td>$ <span th:text="${#numbers.formatDecimal(r.importe,1,'POINT',2,'POINT')}">0.00</span></td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="mt-3">
    <a class="btn btn-secondary" th:href="@{/pedidos}">Volver</a>
  </div>
</div>

<div th:replace="fragmentos/footer :: siteFooter()"></div>
</body>
</html>
